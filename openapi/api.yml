openapi: 3.0.0
paths:
  /api/v0/health:
    get:
      operationId: HealthController_check_v0
      parameters: []
      responses:
        '200':
          description: Service is up and running
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponseDto'
        '401':
          description: Unauthorized. Client key or secret is invalid or missing.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Authenticated health check endpoint
      tags:
        - API Health
  /api/v0/health/public:
    get:
      operationId: HealthController_publicHealthCheck_v0
      parameters: []
      responses:
        '200':
          description: Basic service health check
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicHealthResponseDto'
      summary: Public health check endpoint
      tags:
        - API Health
  /api/v0/test-payment:
    post:
      description: >-
        Creates a new payment. Requires an idempotency key to prevent duplicate payments on retry.
            
        ## Idempotency Key Best Practices


        1. **Generate unique keys**: Use UUIDs or similar unique identifiers, prefixed with a descriptive operation name

        2. **Store keys client-side**: Save the key with the original request so you can retry with the same key

        3. **Key format**: Between 6-64 alphanumeric characters

        4. **Expiration**: Keys expire after 24 hours by default

        5. **Use case**: Perfect for ensuring payment operations are never processed twice, even during network failures


        ## Example Request (curl)


        ```bash

        curl -X POST \
          https://api.example.com/rest-api/v0/test-payment \
          -H 'Content-Type: application/json' \
          -H 'Client-Key: your-api-key' \
          -H 'Client-Secret: your-api-secret' \
          -H 'Idempotency-Key: payment_123456_unique_key' \
          -d '{
            "amount": 100.00,
            "currency": "USD",
            "description": "Test payment for order #12345",
            "customerId": "cus_12345"
          }'
        ```


        ## Example Response (First Request)


        ```json

        {
          "id": "pay_abc123xyz456",
          "amount": 100.00,
          "currency": "USD",
          "status": "succeeded",
          "timestamp": "2023-07-01T12:00:00.000Z"
        }

        ```


        ## Example Response (Duplicate Request)


        The exact same response will be returned for any duplicate request with the same idempotency key, without
        creating a new payment.


        ## Retry Scenario Example


        Network failure during payment submission:

        1. Client creates payment request with idempotency key: "payment_123456_unique_key"

        2. Request begins processing, but network connection fails before response received

        3. Client retries the exact same request with the same idempotency key

        4. Server detects duplicate idempotency key and returns the result of the first request

        5. No duplicate payment is created


        If you retry with same key but different parameters (e.g., different amount), you'll receive a 409 Conflict
        error.
      operationId: TestPaymentController_createPayment_v0
      parameters:
        - name: idempotency-key
          in: header
          description: >-
            Unique key to ensure the request is idempotent. If a request with the same key is sent multiple times, only
            the first will be processed, and subsequent requests will return the same response.
          required: true
          schema:
            type: string
            format: uuid
            example: payment_123456_unique_key
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequestDto'
      responses:
        '201':
          description: Payment processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentResponseDto'
        '400':
          description: |-
            Bad Request. The idempotency key is missing or invalid.
              
            Sample response:
            ```json
            {
              "statusCode": 400,
              "message": "The idempotency-key header is required for POST requests"
            }
            ```
        '401':
          description: Unauthorized. Client key or secret is invalid or missing.
        '409':
          description: |-
            Idempotency Conflict. The provided idempotency key was already used with different parameters.
              
            Sample response:
            ```json
            {
              "statusCode": 409,
              "message": "Conflict: Idempotency key already used with different request data"
            }
            ```
        '429':
          description: Too many requests, rate limit exceeded.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Process a test payment
      tags:
        - Test Payments
  /api/v0/test-payment/{id}:
    get:
      operationId: TestPaymentController_getPayment_v0
      parameters:
        - name: id
          required: true
          in: path
          description: Payment ID
          schema:
            type: string
      responses:
        '200':
          description: Payment details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentResponseDto'
        '400':
          description: |-
            Bad Request. The idempotency key is missing or invalid.
              
            Sample response:
            ```json
            {
              "statusCode": 400,
              "message": "The idempotency-key header is required for POST requests"
            }
            ```
        '401':
          description: Unauthorized. Client key or secret is invalid or missing.
        '409':
          description: |-
            Idempotency Conflict. The provided idempotency key was already used with different parameters.
              
            Sample response:
            ```json
            {
              "statusCode": 409,
              "message": "Conflict: Idempotency key already used with different request data"
            }
            ```
        '429':
          description: Too many requests, rate limit exceeded.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get payment details by ID
      tags:
        - Test Payments
  /api/v0/test-payment/{id}/refund:
    post:
      description: >-
        Refunds an existing payment. Requires an idempotency key to prevent duplicate refunds on retry.
            
        ## Idempotency Key Benefits for Refunds


        Refunds are critical financial operations where duplicates can cause serious issues. Using idempotency keys
        ensures:


        1. **Prevent duplicate refunds**: Even if a request times out or fails, retrying with the same key won't issue
        multiple refunds

        2. **Safe retries**: Network failures or timeouts won't risk creating multiple refunds

        3. **Consistent response**: Always get the same response for the same operation


        ## Example Request (curl)


        ```bash

        curl -X POST \
          https://api.example.com/rest-api/v0/test-payment/pay_abc123xyz456/refund \
          -H 'Content-Type: application/json' \
          -H 'Client-Key: your-api-key' \
          -H 'Client-Secret: your-api-secret' \
          -H 'Idempotency-Key: refund_123456_unique_key'
        ```


        ## Example Response (First Request)


        ```json

        {
          "id": "ref_xyz789",
          "paymentId": "pay_abc123xyz456",
          "amount": 100.00,
          "status": "succeeded",
          "timestamp": "2023-07-01T14:30:00.000Z"
        }

        ```


        ## Example Response (Duplicate Request)


        The exact same response will be returned for any duplicate request with the same idempotency key, without
        creating a new refund.


        ## Idempotency Key Guidelines


        - Use a unique key for each distinct refund operation

        - Store keys client-side to ensure you can retry with the same key if needed

        - Keys expire after 24 hours by default
      operationId: TestPaymentController_refundPayment_v0
      parameters:
        - name: id
          required: true
          in: path
          description: Payment ID to refund
          schema:
            type: string
        - name: idempotency-key
          in: header
          description: >-
            Unique key to ensure the refund request is idempotent. If a request with the same key is sent multiple
            times, only the first will be processed, and subsequent requests will return the same response.
          required: true
          schema:
            type: string
            format: uuid
            example: refund_123456_unique_key
      responses:
        '200':
          description: Payment refunded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefundResponseDto'
        '400':
          description: |-
            Bad Request. The idempotency key is missing or invalid.
              
            Sample response:
            ```json
            {
              "statusCode": 400,
              "message": "The idempotency-key header is required for POST requests"
            }
            ```
        '401':
          description: Unauthorized. Client key or secret is invalid or missing.
        '409':
          description: |-
            Idempotency Conflict. The provided idempotency key was already used with different parameters.
              
            Sample response:
            ```json
            {
              "statusCode": 409,
              "message": "Conflict: Idempotency key already used with different request data"
            }
            ```
        '429':
          description: Too many requests, rate limit exceeded.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Refund a payment
      tags:
        - Test Payments
  /api/v0/customers:
    post:
      description: >-
        Creates a new customer in the system with their personal and contact information.
            
        This endpoint allows you to register new customers and store their details for future transactions.


        ## Use Cases

        - Register new customers for payment processing

        - Store customer information for recurring payments

        - Maintain customer profiles for transaction history


        ## Example: Create New Customer

        ```json

        {
          "first_name": "John",
          "last_name": "Doe",
          "email": "john.doe@example.com",
          "phone_number": "+1-555-123-4567",
          "customer_type": "Startup",
          "status": "ACTIVE"
        }

        ```


        ## Required Fields

        - `first_name`: Customer's first name (1-100 characters)

        - `last_name`: Customer's last name (1-100 characters)

        - `phone_number`: Customer's phone number (max 20 characters)


        ## Optional Fields

        - `email`: Valid email address (max 255 characters)

        - `customer_type`: Type of customer account (Individual, Startup, Small Business, Medium Business, Enterprise,
        Non-Profit, Government)

        - `status`: Customer status (ACTIVE, BLACKLISTED, DEACTIVATED)
      operationId: CustomerController_create
      parameters: []
      requestBody:
        required: true
        description: Customer creation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCustomerDto'
      responses:
        '201':
          description: Customer created successfully
        '400':
          description: Bad Request - Invalid input data
        '401':
          description: Unauthorized - Invalid API credentials
        '409':
          description: Conflict - Customer with the same email already exists
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new customer
      tags:
        - Customers
    get:
      description: |-
        Retrieves a list of customers with optional filtering and pagination.
            
        This endpoint allows you to search and filter customers based on various criteria.

        ## Use Cases
        - List all customers with pagination
        - Search customers by name or email
        - Filter customers by status
        - Export customer data

        ## Query Parameters
        - `skip`: Number of records to skip (default: 0, min: 0)
        - `take`: Number of records to take (default: 10, min: 1, max: 100)
        - `status`: Filter by customer status (ACTIVE, BLACKLISTED, DEACTIVATED)
        - `name`: Filter by customer name (partial match, case-insensitive)
        - `email`: Filter by customer email (exact match, case-insensitive)

        ## Example Request
        `GET /api/v0/customers?skip=0&take=20&status=ACTIVE&name=John`

        ## Example Response
        ```json
        {
          "data": [
            {
              "id": "cust_123456",
              "first_name": "John",
              "last_name": "Doe",
              "email": "john.doe@example.com",
              "phone_number": "+1-555-123-4567",
              "customer_type": "Startup",
              "status": "ACTIVE",
              "created_at": "2024-03-20T10:00:00Z",
              "updated_at": "2024-03-20T10:00:00Z"
            }
          ],
          "total": 100,
          "skip": 0,
          "take": 10
        }
        ```
      operationId: CustomerController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: Number of records to skip for pagination
          schema:
            minimum: 0
            default: 0
            example: 0
            type: number
        - name: take
          required: false
          in: query
          description: Number of records to return (max 100)
          schema:
            minimum: 1
            maximum: 100
            default: 10
            example: 10
            type: number
        - name: status
          required: false
          in: query
          description: Filter customers by status
          schema:
            $ref: '#/components/schemas/CustomerStatus'
        - name: name
          required: false
          in: query
          description: Filter customers by name (partial match, case-insensitive)
          schema:
            maxLength: 100
            example: John
            type: string
        - name: email
          required: false
          in: query
          description: Filter customers by email (exact match, case-insensitive)
          schema:
            maxLength: 255
            example: john.doe@example.com
            type: string
      responses:
        '200':
          description: Successfully retrieved customers
        '400':
          description: Bad Request - Invalid query parameters
        '401':
          description: Unauthorized - Invalid API credentials
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all customers with filters
      tags:
        - Customers
  /api/v0/customers/{id}:
    get:
      description: |-
        Retrieves detailed information about a specific customer.
            
        This endpoint allows you to fetch complete customer details including their contact information and status.

        ## Use Cases
        - View customer details
        - Verify customer information
        - Check customer status before processing payments

        ## Path Parameters
        - `id`: Customer UUID (required) - Must be a valid UUID format

        ## Example Request
        `GET /api/v0/customers/123e4567-e89b-12d3-a456-426614174000`

        ## Example Response
        ```json
        {
          "id": "cust_123456",
          "first_name": "John",
          "last_name": "Doe",
          "email": "john.doe@example.com",
          "phone_number": "+1-555-123-4567",
          "customer_type": "Enterprise",
          "status": "ACTIVE",
          "last_spent": 1250.50,
          "last_purchase_date": "2024-03-15T14:30:00Z",
          "created_at": "2024-03-20T10:00:00Z",
          "updated_at": "2024-03-20T10:00:00Z"
        }
        ```
      operationId: CustomerController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Customer unique identifier (UUID)
          schema:
            format: uuid
            example: cust_123e4567-e89b-12d3-a456-426614174000
            type: string
      responses:
        '200':
          description: Successfully retrieved customer
        '400':
          description: Bad Request - Invalid customer ID format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - Customer not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get a customer by ID
      tags:
        - Customers
    patch:
      description: |-
        Updates an existing customer's information.
            
        This endpoint allows you to modify customer details while preserving their core information.

        ## Use Cases
        - Update customer contact information
        - Change customer type
        - Modify customer status

        ## Path Parameters
        - `id`: Customer UUID (required) - Must be a valid UUID format

        ## Example Request
        `PATCH /api/v0/customers/123e4567-e89b-12d3-a456-426614174000`

        ## Example Request Body
        ```json
        {
          "first_name": "John",
          "last_name": "Smith",
          "phone_number": "+1-987-654-3210",
          "customer_type": "Small Business"
        }
        ```

        ## Notes
        - Only include fields that need to be updated
        - All fields are optional in updates
        - Status changes may require additional verification
      operationId: CustomerController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Customer unique identifier (UUID)
          schema:
            format: uuid
            example: cust_123e4567-e89b-12d3-a456-426614174000
            type: string
      requestBody:
        required: true
        description: Customer update data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerDto'
      responses:
        '200':
          description: Successfully updated customer
        '400':
          description: Bad Request - Invalid input data or customer ID format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - Customer not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update a customer
      tags:
        - Customers
  /api/v0/payment-links:
    post:
      description: >-
        Creates a new payment link with the provided details. Supports both simple one-time payments and complex product
        bundles.
      operationId: PaymentLinksController_create
      parameters: []
      requestBody:
        required: true
        description: Payment link creation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentLinkDto'
      responses:
        '201':
          description: The payment link has been successfully created.
        '400':
          description: Bad Request.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new payment link
      tags:
        - Payment Links
    get:
      operationId: PaymentLinksController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: Number of records to skip (must be non-negative)
          schema:
            type: string
        - name: take
          required: false
          in: query
          description: Number of records to take (must be positive)
          schema:
            type: string
      responses:
        '200':
          description: Return all payment links.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all payment links
      tags:
        - Payment Links
  /api/v0/payment-links/{id}:
    get:
      operationId: PaymentLinksController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Payment Link ID
          schema:
            type: string
      responses:
        '200':
          description: Return the payment link.
        '404':
          description: Payment link not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get a payment link by ID
      tags:
        - Payment Links
    put:
      operationId: PaymentLinksController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Payment Link ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePaymentLinkDto'
      responses:
        '200':
          description: The payment link has been successfully updated.
        '404':
          description: Payment link not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update a payment link
      tags:
        - Payment Links
  /api/v0/payment-intents/stablecoin:
    post:
      description: >-
        Creates a new stable payment intent for stablecoin-to-stablecoin transfers.
            
        This endpoint allows you to create payment intents for transfers between different stablecoins and networks.

        Perfect for cross-chain stablecoin swaps and conversions.


        ## Use Cases

        - USDC to EURC conversions

        - Cross-chain stablecoin transfers (e.g., Ethereum USDC to Polygon USDC)

        - Flexible amount payment intents for dynamic pricing


        ## Example: USDC to EURC Conversion

        ```json

        {
          "sourceCurrency": "usdc",
          "sourceNetwork": "ethereum",
          "destinationCurrency": "eurc",
          "destinationNetwork": "polygon",
          "destinationAddress": "0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1",
          "amount": "100.00",
          "customer_first_name": "John",
          "customer_last_name": "Doe",
          "customer_email": "john.doe@example.com"
        }

        ```


        ## Flexible Amount Payments

        Omit the `amount` field to create a flexible payment intent where users can specify the amount during payment.


        ## Idempotency

        Include an `idempotency-key` header with a unique UUID v4 to prevent duplicate payments. Subsequent requests
        with the same key will return the original response.
      operationId: PaymentIntentController_createStablePaymentIntent
      parameters:
        - name: idempotency-key
          in: header
          description: Unique UUID v4 for idempotent requests. Prevents duplicate payments.
          required: true
          schema:
            type: string
      requestBody:
        required: true
        description: Stable payment intent creation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStablePaymentIntentDto'
      responses:
        '201':
          description: Stable payment intent created successfully
          content:
            application/json:
              example:
                id: txn_01HZXK8M9N2P3Q4R5S6T7U8V9W
                bridge_transfer_id: transfer_abc123xyz456
                state: pending
                amount: '100.00'
                source:
                  payment_rail: ethereum
                  currency: usdc
                destination:
                  payment_rail: polygon
                  currency: eurc
                  to_address: '0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1'
                customer:
                  first_name: John
                  last_name: Doe
                  email: john.doe@example.com
                  address: 123 Main St, New York, NY 10001
                  country: United States
                  phone_number: +1-555-123-4567
                created_at: '2023-07-01T12:00:00.000Z'
                updated_at: '2023-07-01T12:00:00.000Z'
        '400':
          description: Bad Request - Invalid input data
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - App not found
        '409':
          description: Conflict - Idempotency key already used with different parameters
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a stable payment intent
      tags:
        - Payment Intents
  /api/v0/payment-intents/bank:
    post:
      description: >-
        Creates a new bank payment intent for fiat-to-stablecoin transfers.
            
        This endpoint allows you to create payment intents for bank transfers (ACH, Wire, SEPA) that convert to
        stablecoins.

        Perfect for onboarding users from traditional banking to crypto.


        ## Supported Payment Rails

        - **ACH_PUSH**: US bank transfers (same-day or standard)

        - **WIRE**: International wire transfers

        - **SEPA**: European bank transfers


        ## Use Cases

        - USD bank account to USDC conversion

        - EUR bank account to EURC conversion

        - MXN bank account to stablecoin conversion

        - Flexible amount payment intents for variable pricing


        ## Supported Source Currencies

        - **USD**: US Dollar

        - **EUR**: Euro

        - **MXN**: Mexican Peso


        ## Example: USD Bank to USDC

        ```json

        {
          "sourcePaymentRail": "ach_push",
          "sourceCurrency": "usd",
          "destinationCurrency": "usdc",
          "destinationNetwork": "ethereum",
          "destinationAddress": "0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1",
          "amount": "1000.00",
          "customer_first_name": "John",
          "customer_last_name": "Doe",
          "customer_email": "john.doe@example.com",
          "ach_reference": "INV12345"
        }

        ```


        ## Reference Fields

        Use appropriate reference fields based on the payment rail:

        - `ach_reference`: For ACH transfers (max 10 chars, alphanumeric + spaces)

        - `wire_message`: For wire transfers (max 256 chars)

        - `sepa_reference`: For SEPA transfers (6-140 chars, specific character set)


        ## Idempotency

        Include an `idempotency-key` header with a unique UUID v4 to prevent duplicate payments. Subsequent requests
        with the same key will return the original response.
      operationId: PaymentIntentController_createBankPaymentIntent
      parameters:
        - name: idempotency-key
          in: header
          description: Unique UUID v4 for idempotent requests. Prevents duplicate payments.
          required: true
          schema:
            type: string
      requestBody:
        required: true
        description: Bank payment intent creation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBankPaymentIntentDto'
      responses:
        '201':
          description: Bank payment intent created successfully
          content:
            application/json:
              example:
                id: txn_01HZXK8M9N2P3Q4R5S6T7U8V9X
                bridge_transfer_id: transfer_def456ghi789
                state: pending
                amount: '1000.00'
                source:
                  payment_rail: ach_push
                  currency: usd
                destination:
                  payment_rail: ethereum
                  currency: usdc
                  to_address: '0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1'
                customer:
                  first_name: John
                  last_name: Doe
                  email: john.doe@example.com
                  address: 123 Main St, New York, NY 10001
                  country: United States
                  phone_number: +1-555-123-4567
                references:
                  ach_reference: INV12345
                created_at: '2023-07-01T12:00:00.000Z'
                updated_at: '2023-07-01T12:00:00.000Z'
        '400':
          description: Bad Request - Invalid input data
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - App not found
        '409':
          description: Conflict - Idempotency key already used with different parameters
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a bank payment intent
      tags:
        - Payment Intents
  /api/v0/webhooks:
    post:
      description: Creates a new webhook endpoint for receiving event notifications. Requires webhook:create scope.
      operationId: WebhookController_create
      parameters: []
      requestBody:
        required: true
        description: Webhook configuration details
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWebhookDto'
      responses:
        '201':
          description: The webhook has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookResponseDto'
        '400':
          description: Invalid input data.
          content:
            application/json: {}
        '401':
          description: Unauthorized - Missing or invalid API key.
          content:
            application/json: {}
        '403':
          description: Forbidden - Missing required scope or API key not found.
          content:
            application/json: {}
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new webhook
      tags:
        - Webhooks
    get:
      description: Retrieves a list of all webhooks for your application. Requires webhook:read scope.
      operationId: WebhookController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: 'Number of records to skip (default: 0)'
          schema:
            type: number
        - name: take
          required: false
          in: query
          description: 'Number of records to return (default: 10)'
          schema:
            type: number
      responses:
        '200':
          description: Return all webhooks.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WebhookResponseDto'
        '401':
          description: Unauthorized - Missing or invalid API key.
          content:
            application/json: {}
        '403':
          description: Forbidden - Missing required scope or API key not found.
          content:
            application/json: {}
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all webhooks
      tags:
        - Webhooks
  /api/v0/webhooks/{id}:
    get:
      description: Retrieves details for a specific webhook. Requires webhook:read scope.
      operationId: WebhookController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Webhook unique identifier (UUID)
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: Return the webhook.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookResponseDto'
        '401':
          description: Unauthorized - Missing or invalid API key.
          content:
            application/json: {}
        '403':
          description: Forbidden - Missing required scope or API key not found.
          content:
            application/json: {}
        '404':
          description: Webhook not found.
          content:
            application/json:
              example:
                statusCode: 404
                message: Webhook not found
                error: Not Found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get a webhook by id
      tags:
        - Webhooks
    patch:
      description: Updates an existing webhook configuration. Requires webhook:update scope.
      operationId: WebhookController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Webhook unique identifier (UUID)
          schema:
            format: uuid
            type: string
      requestBody:
        required: true
        description: Webhook update details
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWebhookDto'
      responses:
        '200':
          description: The webhook has been successfully updated.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookResponseDto'
        '400':
          description: Invalid input data.
          content:
            application/json: {}
        '401':
          description: Unauthorized - Missing or invalid API key.
          content:
            application/json: {}
        '403':
          description: Forbidden - Missing required scope or API key not found.
          content:
            application/json: {}
        '404':
          description: Webhook not found.
          content:
            application/json:
              example:
                statusCode: 404
                message: Webhook not found
                error: Not Found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update a webhook
      tags:
        - Webhooks
    delete:
      description: Deletes a webhook configuration. Requires webhook:delete scope.
      operationId: WebhookController_remove
      parameters:
        - name: id
          required: true
          in: path
          description: Webhook unique identifier (UUID)
          schema:
            format: uuid
            type: string
      responses:
        '200':
          description: The webhook has been successfully deleted.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebhookResponseDto'
        '401':
          description: Unauthorized - Missing or invalid API key.
          content:
            application/json: {}
        '403':
          description: Forbidden - Missing required scope or API key not found.
          content:
            application/json: {}
        '404':
          description: Webhook not found.
          content:
            application/json:
              example:
                statusCode: 404
                message: Webhook not found
                error: Not Found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Delete a webhook
      tags:
        - Webhooks
  /api/v0/wallets:
    get:
      operationId: WalletController_getWallets
      parameters: []
      responses:
        '200':
          description: ''
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get wallets for an app
      tags:
        - Wallets
  /api/v0/transfers/direct-wallet:
    post:
      operationId: TransferController_createDirectWalletTransfer
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDirectWalletTransferDto'
      responses:
        '201':
          description: The transfer has been successfully created.
        '400':
          description: Bad Request - Invalid input
        '404':
          description: Not Found - Bridge wallet not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a direct wallet transfer
      tags:
        - Transfers
  /api/v0/transfers/direct-bank:
    post:
      operationId: TransferController_createDirectBankTransfer
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDirectBankTransferDto'
      responses:
        '201':
          description: The transfer has been successfully created.
        '400':
          description: Bad Request - Invalid input
        '404':
          description: Not Found - Bridge wallet not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a direct bank transfer
      tags:
        - Transfers
  /api/v0/transfers/stablecoin-conversion:
    post:
      operationId: TransferController_createStablecoinConversion
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStablecoinConversionDto'
      responses:
        '201':
          description: The conversion has been successfully created.
        '400':
          description: Bad Request - Invalid input
        '404':
          description: Not Found - Bridge wallet not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a stablecoin conversion
      tags:
        - Transfers
  /api/v0/transfers/external-bank-transfer:
    post:
      operationId: TransferController_createExternalBankTransfer
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExternalBankTransferDto'
      responses:
        '201':
          description: The external bank transfer has been successfully created.
        '400':
          description: Bad Request - Invalid input
        '404':
          description: Not Found - Bridge wallet not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create an external bank transfer
      tags:
        - Transfers
  /api/v0/transfers/external-stablecoin-transfer:
    post:
      operationId: TransferController_createExternalStablecoinTransfer
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExternalStablecoinTransferDto'
      responses:
        '201':
          description: The external stablecoin transfer has been successfully created.
        '400':
          description: Bad Request - Invalid input
        '404':
          description: Not Found - Bridge wallet not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create an external stablecoin transfer
      tags:
        - Transfers
  /api/v0/customers/{customerId}/liquidation_addresses:
    post:
      description: |2-

              Create a new liquidation address for a customer. Liquidation addresses allow 
              customers to automatically liquidate cryptocurrency holdings to fiat or other 
              stablecoins based on configured parameters.

              **Required fields:**
              - chain: Blockchain network (ethereum, polygon, arbitrum, base)
              - currency: Stablecoin currency (usdc, eurc, dai, pyusd, usdt)
              - address: Valid blockchain address

              **At least one destination must be specified:**
              - external_account_id: External bank account
              - prefunded_account_id: Developer's prefunded account
              - bridge_wallet_id: Bridge wallet
              - destination_address: Crypto wallet address

              **Payment Rails:**
              Different payment rails have different requirements:
              - ACH: Requires external_account_id, supports destination_ach_reference
              - SEPA: Requires external_account_id, supports destination_sepa_reference
              - Wire: Requires external_account_id, supports destination_wire_message
              - Crypto: Requires destination_address, supports destination_blockchain_memo
            
      operationId: LiquidationAddressController_createLiquidationAddress
      parameters:
        - name: customerId
          required: true
          in: path
          description: Unique identifier for the customer
          schema:
            example: cust_123
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLiquidationAddressDto'
      responses:
        '201':
          description: Liquidation address created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LiquidationAddressResponseDto'
        '400':
          description: Invalid request data
          content:
            application/json:
              schema:
                example:
                  error: Validation failed
                  message: Invalid Ethereum address format
                  statusCode: 400
        '404':
          description: Customer not found
          content:
            application/json:
              schema:
                example:
                  error: Not Found
                  message: Customer with id 'cust_123' not found
                  statusCode: 404
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                example:
                  message: Failed to create liquidation address
                  statusCode: 500
      summary: Create a new liquidation address for a customer
      tags:
        - Liquidation Addresses
    get:
      description: Retrieve all liquidation addresses associated with a specific customer.
      operationId: LiquidationAddressController_getLiquidationAddresses
      parameters:
        - name: customerId
          required: true
          in: path
          description: Unique identifier for the customer
          schema:
            example: cust_123
            type: string
      responses:
        '200':
          description: List of liquidation addresses
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LiquidationAddressResponseDto'
        '404':
          description: Customer not found
          content:
            application/json:
              schema:
                example:
                  error: Not Found
                  message: Customer with id 'cust_123' not found
                  statusCode: 404
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                example:
                  message: Failed to fetch liquidation addresses
                  statusCode: 500
      summary: Get all liquidation addresses for a customer
      tags:
        - Liquidation Addresses
  /api/v0/customers/{customerId}/liquidation_addresses/{liquidationAddressId}:
    get:
      description: Retrieve a specific liquidation address by its ID for a given customer.
      operationId: LiquidationAddressController_getLiquidationAddress
      parameters:
        - name: customerId
          required: true
          in: path
          description: Unique identifier for the customer
          schema:
            example: cust_123
            type: string
        - name: liquidationAddressId
          required: true
          in: path
          description: Unique identifier for the liquidation address
          schema:
            example: la_generated_id_123
            type: string
      responses:
        '200':
          description: Liquidation address details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LiquidationAddressResponseDto'
        '404':
          description: Liquidation address not found
          content:
            application/json:
              schema:
                example:
                  error: Not Found
                  message: Liquidation address with id 'la_123' not found
                  statusCode: 404
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                example:
                  message: Failed to fetch liquidation address
                  statusCode: 500
      summary: Get a specific liquidation address
      tags:
        - Liquidation Addresses
  /api/v0/balance/usdc:
    get:
      description: |-
        Retrieves the total USDC balance across all wallets for the specified app.
            
        This endpoint aggregates USDC balances from all associated wallets and provides:
        - Total USDC balance across all chains and wallets
        - Detailed breakdown by individual wallet and blockchain network
        - Contract addresses and wallet identifiers for each balance

        ## Use Cases
        - Dashboard balance display
        - Financial reporting and reconciliation
        - Real-time balance monitoring
        - Multi-chain balance aggregation

        ## Response Format
        The response includes both the aggregated total and detailed breakdown, allowing for
        comprehensive balance tracking and wallet-specific analysis.
      operationId: BalanceController_getUSDCBalance
      parameters: []
      responses:
        '200':
          description: USDC balance retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregatedBalanceResponse'
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get USDC balance for an app
      tags:
        - App Balances
  /api/v0/balance/eurc:
    get:
      description: |-
        Retrieves the total EURC balance across all wallets for the specified app.
            
        This endpoint aggregates EURC balances from all associated wallets and provides:
        - Total EURC balance across all chains and wallets
        - Detailed breakdown by individual wallet and blockchain network
        - Contract addresses and wallet identifiers for each balance

        ## Use Cases
        - Dashboard balance display
        - European market operations
        - Euro-denominated financial reporting
        - Cross-currency balance tracking

        ## Response Format
        The response includes both the aggregated total and detailed breakdown, enabling
        comprehensive euro stablecoin balance management.
      operationId: BalanceController_getEURCBalance
      parameters: []
      responses:
        '200':
          description: EURC balance retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AggregatedBalanceResponse'
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get EURC balance for an app
      tags:
        - App Balances
  /api/v0/balance:
    get:
      description: |-
        Retrieves both USDC and EURC balances across all wallets for the specified app.
            
        This comprehensive endpoint provides:
        - Complete USDC balance aggregation with detailed breakdown
        - Complete EURC balance aggregation with detailed breakdown
        - Total USD equivalent value across both currencies
        - Individual wallet and chain-specific balance details

        ## Use Cases
        - Complete financial dashboard overview
        - Multi-currency balance reporting
        - Comprehensive wallet management
        - Cross-currency analytics and reporting

        ## Response Format
        The response includes separate aggregations for each currency plus a combined
        USD value estimate, providing complete visibility into stablecoin holdings.
      operationId: BalanceController_getAllBalances
      parameters: []
      responses:
        '200':
          description: All stablecoin balances retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllBalancesResponse'
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all stablecoin balances for an app
      tags:
        - App Balances
  /api/v0/exchange-rate/usd-to-eur:
    get:
      description: |-
        Retrieves the current exchange rate for converting USD to EUR (USDC to EURC).
            
        This endpoint provides real-time exchange rate information for stablecoin conversions:
        - Mid-market rate for reference pricing
        - Buy rate for actual conversion calculations
        - Sell rate for reverse conversion scenarios

        ## Use Cases
        - Display current exchange rates in dashboards
        - Calculate conversion amounts for USDC to EURC transfers
        - Financial reporting and analytics
        - Real-time pricing for multi-currency operations

        ## Rate Information
        - **Mid-market rate**: The theoretical middle rate between buy and sell
        - **Buy rate**: Rate used when converting FROM USD TO EUR (what you get)
        - **Sell rate**: Rate used when converting FROM EUR TO USD (what you pay)

        The rates are updated in real-time and reflect current market conditions.
      operationId: ExchangeRateController_getUSDToEURRate
      parameters: []
      responses:
        '200':
          description: Exchange rate retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExchangeRateResponseDto'
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get USD to EUR exchange rate
      tags:
        - Exchange Rates
  /api/v0/exchange-rate/eur-to-usd:
    get:
      description: |-
        Retrieves the current exchange rate for converting EUR to USD (EURC to USDC).
            
        This endpoint provides real-time exchange rate information for stablecoin conversions:
        - Mid-market rate for reference pricing
        - Buy rate for actual conversion calculations
        - Sell rate for reverse conversion scenarios

        ## Use Cases
        - Display current exchange rates in dashboards
        - Calculate conversion amounts for EURC to USDC transfers
        - Financial reporting and analytics
        - Real-time pricing for multi-currency operations

        ## Rate Information
        - **Mid-market rate**: The theoretical middle rate between buy and sell
        - **Buy rate**: Rate used when converting FROM EUR TO USD (what you get)
        - **Sell rate**: Rate used when converting FROM USD TO EUR (what you pay)

        The rates are updated in real-time and reflect current market conditions.
      operationId: ExchangeRateController_getEURToUSDRate
      parameters: []
      responses:
        '200':
          description: Exchange rate retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExchangeRateResponseDto'
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get EUR to USD exchange rate
      tags:
        - Exchange Rates
  /api/v0/exchange-rate:
    get:
      description: |-
        Retrieves the current exchange rate between two specified currencies.
            
        This flexible endpoint allows you to get exchange rates for any supported currency pair:
        - Supports USD and EUR currency codes
        - Provides comprehensive rate information
        - Real-time market data

        ## Supported Currency Pairs
        - USD to EUR (USDC to EURC)
        - EUR to USD (EURC to USDC)

        ## Query Parameters
        - **from**: Source currency code (usd, eur)
        - **to**: Target currency code (usd, eur)

        ## Use Cases
        - Flexible exchange rate queries
        - Multi-currency application support
        - Dynamic currency conversion calculations
        - Financial analytics and reporting

        ## Rate Information
        All rates are provided with full market context including mid-market, buy, and sell rates.
      operationId: ExchangeRateController_getExchangeRate
      parameters:
        - name: from
          required: true
          in: query
          description: Source currency code (e.g., usd)
          schema:
            example: usd
            type: string
        - name: to
          required: true
          in: query
          description: Target currency code (e.g., eur)
          schema:
            example: eur
            type: string
      responses:
        '200':
          description: Exchange rate retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExchangeRateResponseDto'
        '400':
          description: Bad Request - Invalid currency codes or unsupported currency pair
        '401':
          description: Unauthorized - Invalid or missing API credentials
        '404':
          description: App not found or no access permission
        '500':
          description: Internal server error
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get exchange rate between specified currencies
      tags:
        - Exchange Rates
  /api/v0/products:
    post:
      description: |-
        Creates a new product with optional image uploads.
            
        This endpoint allows you to create products with detailed information and multiple images.

        ## Use Cases
        - Add new products to your catalog
        - Create products with multiple images
        - Set up product pricing and descriptions

        ## Supported Image Formats
        - JPEG/JPG
        - PNG
        - WebP
        - Maximum 10 images per product
        - Maximum file size: 5MB per image

        ## Example Request (multipart/form-data)
        ```
        name: "Premium Widget"
        description: "High-quality widget for all your needs"
        price: "99.99"
        images: [file1.jpg, file2.jpg]  // Optional, up to 10 images
        ```

        ## Required Fields
        - `name`: Product name
        - `price`: Product price (decimal number)

        ## Optional Fields
        - `description`: Detailed product description
        - `images`: Product images (up to 10 files)
      operationId: ProductController_create
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateProductDto'
      responses:
        '201':
          description: The product has been successfully created.
        '400':
          description: Bad Request - Invalid input data or image format
        '401':
          description: Unauthorized - Invalid API credentials
        '413':
          description: Payload Too Large - Image files too large
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new product
      tags:
        - Products
    get:
      description: |-
        Retrieves a list of products with pagination.
            
        This endpoint allows you to fetch products with optional pagination.

        ## Use Cases
        - List all products
        - Browse product catalog
        - Implement product search

        ## Query Parameters
        - `skip`: Number of records to skip (default: 0)
        - `take`: Number of records to take (default: 10)

        ## Example Response
        ```json
        {
          "data": [
            {
              "id": "prod_123456",
              "name": "Premium Widget",
              "description": "High-quality widget for all your needs",
              "price": "99.99",
              "images": [
                "https://storage.example.com/images/file1.jpg",
                "https://storage.example.com/images/file2.jpg"
              ],
              "createdAt": "2024-03-20T10:00:00Z"
            }
          ],
          "total": 100,
          "skip": 0,
          "take": 10
        }
        ```
      operationId: ProductController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: Number of records to skip
          schema:
            type: number
        - name: take
          required: false
          in: query
          description: Number of records to take
          schema:
            type: number
      responses:
        '200':
          description: Return all products.
        '401':
          description: Unauthorized - Invalid API credentials
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all products
      tags:
        - Products
  /api/v0/products/{id}/images:
    post:
      description: |-
        Adds new images to an existing product.
            
        This endpoint allows you to upload additional images for a product that already exists.

        ## Use Cases
        - Add more product images
        - Update product gallery
        - Enhance product presentation

        ## Supported Image Formats
        - JPEG/JPG
        - PNG
        - WebP
        - Maximum 10 images per upload
        - Maximum file size: 5MB per image

        ## Example Request (multipart/form-data)
        ```
        images: [file1.jpg, file2.jpg]  // Up to 10 images
        ```

        ## Notes
        - Images are appended to existing product images
        - Total images per product cannot exceed 10
        - Images are automatically optimized and resized
      operationId: ProductController_uploadImage
      parameters:
        - name: id
          required: true
          in: path
          description: Product ID
          schema:
            type: string
      responses:
        '201':
          description: The images have been successfully uploaded.
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Product not found.
        '413':
          description: Payload Too Large - Image files too large
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Upload images for a product
      tags:
        - Products
  /api/v0/products/{id}:
    get:
      description: |-
        Retrieves detailed information about a specific product.
            
        This endpoint allows you to fetch complete product details including all images.

        ## Use Cases
        - View product details
        - Display product information
        - Check product availability

        ## Example Response
        ```json
        {
          "id": "prod_123456",
          "name": "Premium Widget",
          "description": "High-quality widget for all your needs",
          "price": "99.99",
          "images": [
            "https://storage.example.com/images/file1.jpg",
            "https://storage.example.com/images/file2.jpg"
          ],
          "createdAt": "2024-03-20T10:00:00Z",
          "updatedAt": "2024-03-20T10:00:00Z"
        }
        ```
      operationId: ProductController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Product ID
          schema:
            type: string
      responses:
        '200':
          description: Return the product.
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Product not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get a product by ID
      tags:
        - Products
    put:
      description: |-
        Updates an existing product's information and optionally adds new images.
            
        This endpoint allows you to modify product details and manage product images.

        ## Use Cases
        - Update product information
        - Change product pricing
        - Modify product images
        - Update product description

        ## Example Request (multipart/form-data)
        ```
        name: "Updated Premium Widget"
        description: "Updated description"
        price: "129.99"
        images: [file1.jpg, file2.jpg]  // Optional, up to 10 images
        ```

        ## Notes
        - Only include fields that need to be updated
        - New images will replace existing images
        - Maximum 10 images per product
        - Images are automatically optimized
      operationId: ProductController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Product ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UpdateProductDto'
      responses:
        '200':
          description: The product has been successfully updated.
        '400':
          description: Bad Request - Invalid input data or image format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Product not found.
        '413':
          description: Payload Too Large - Image files too large
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update a product
      tags:
        - Products
    delete:
      description: |-
        Deletes a product and its associated images.
            
        This endpoint allows you to remove a product and all its associated data.

        ## Use Cases
        - Remove discontinued products
        - Clean up product catalog
        - Delete test products

        ## Notes
        - This action cannot be undone
        - All product images will be deleted
        - Associated data will be removed
      operationId: ProductController_remove
      parameters:
        - name: id
          required: true
          in: path
          description: Product ID
          schema:
            type: string
      responses:
        '200':
          description: The product has been successfully deleted.
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Product not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Delete a product
      tags:
        - Products
  /api/v0/invoices:
    post:
      operationId: InvoiceController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvoiceDto'
      responses:
        '201':
          description: The invoice has been successfully created.
        '400':
          description: Bad Request.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new invoice
      tags:
        - Invoices
    get:
      operationId: InvoiceController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: Number of records to skip
          schema:
            type: number
        - name: take
          required: false
          in: query
          description: Number of records to take
          schema:
            type: number
      responses:
        '200':
          description: Return all invoices.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all invoices
      tags:
        - Invoices
  /api/v0/invoices/{id}:
    get:
      operationId: InvoiceController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Invoice ID
          schema:
            type: string
      responses:
        '200':
          description: Return the invoice.
        '404':
          description: Invoice not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get an invoice by ID
      tags:
        - Invoices
    put:
      operationId: InvoiceController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Invoice ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInvoiceDto'
      responses:
        '200':
          description: The invoice has been successfully updated.
        '404':
          description: Invoice not found.
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update an invoice
      tags:
        - Invoices
  /api/v0/taxes:
    post:
      description: |-
        Creates a new tax rate that can be applied to products, invoices, and payment links.

        ## Use Cases
        - Set up sales tax for different regions
        - Create VAT rates for international customers
        - Configure state and local tax rates
        - Manage tax compliance requirements

        ## Example: Create Basic Sales Tax
        ```json
        {
          "name": "Sales Tax",
          "description": "Standard sales tax for retail transactions",
          "percentage": 8.5,
          "active": true
        }
        ```

        ## Required Fields
        - `name`: Tax name for identification (1-100 characters)
        - `percentage`: Tax rate percentage (0-100)

        ## Optional Fields
        - `description`: Explanation of what this tax covers (max 255 characters)
        - `active`: Whether this tax is currently active (default: true)
        - `appIds`: Array of app IDs where this tax should be available
      operationId: TaxController_create
      parameters: []
      requestBody:
        required: true
        description: Tax creation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTaxDto'
      responses:
        '201':
          description: Tax created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: tax_123e4567-e89b-12d3-a456-426614174000
                  name:
                    type: string
                    example: Sales Tax
                  description:
                    type: string
                    example: Standard sales tax for retail transactions
                  percentage:
                    type: number
                    example: 8.5
                  active:
                    type: boolean
                    example: true
                  created_at:
                    type: string
                    format: date-time
                  updated_at:
                    type: string
                    format: date-time
        '400':
          description: Bad Request - Invalid input data
        '401':
          description: Unauthorized - Invalid API credentials
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Create a new tax
      tags:
        - Taxes
    get:
      description: |-
        Retrieves a list of taxes with optional filtering and pagination.

        ## Use Cases
        - List all available tax rates
        - Search taxes by name
        - Filter active/inactive taxes
        - Export tax configuration

        ## Query Parameters
        - `skip`: Number of records to skip (default: 0, min: 0)
        - `take`: Number of records to return (default: 10, min: 1, max: 100)
        - `name`: Filter taxes by name (partial match, case-insensitive)
        - `active`: Filter by active status (true/false)

        ## Example Request
        `GET /api/v0/taxes?skip=0&take=20&active=true&name=Sales`

        ## Example Response
        ```json
        [
          {
            "id": "tax_123456",
            "name": "Sales Tax",
            "description": "Standard sales tax for retail transactions",
            "percentage": 8.5,
            "active": true,
            "created_at": "2024-03-20T10:00:00Z",
            "updated_at": "2024-03-20T10:00:00Z"
          }
        ]
        ```
      operationId: TaxController_findAll
      parameters:
        - name: skip
          required: false
          in: query
          description: Number of records to skip for pagination
          schema:
            minimum: 0
            default: 0
            example: 0
            type: number
        - name: take
          required: false
          in: query
          description: Number of records to return (max 100)
          schema:
            minimum: 1
            maximum: 100
            default: 10
            example: 10
            type: number
        - name: name
          required: false
          in: query
          description: Filter taxes by name (partial match, case-insensitive)
          schema:
            maxLength: 100
            example: Sales
            type: string
        - name: active
          required: false
          in: query
          description: Filter by active status
          schema:
            example: true
            type: boolean
      responses:
        '200':
          description: Successfully retrieved taxes
        '400':
          description: Bad Request - Invalid query parameters
        '401':
          description: Unauthorized - Invalid API credentials
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get all taxes with filters
      tags:
        - Taxes
    put:
      description: This endpoint requires a tax ID in the URL path. Use PUT /api/v0/taxes/{id} instead.
      operationId: TaxController_updateWithoutId
      parameters: []
      responses:
        '400':
          description: Bad Request - Tax ID is required in the URL path
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Tax ID is required in the URL path. Use PUT /api/v0/taxes/{id} to update a specific tax.
                  error:
                    type: string
                    example: Bad Request
                  statusCode:
                    type: number
                    example: 400
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Tax ID required for updates
      tags:
        - Taxes
    delete:
      description: This endpoint requires a tax ID in the URL path. Use DELETE /api/v0/taxes/{id} instead.
      operationId: TaxController_deleteWithoutId
      parameters: []
      responses:
        '400':
          description: Bad Request - Tax ID is required in the URL path
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Tax ID is required in the URL path. Use DELETE /api/v0/taxes/{id} to delete a specific tax.
                  error:
                    type: string
                    example: Bad Request
                  statusCode:
                    type: number
                    example: 400
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Tax ID required for deletion
      tags:
        - Taxes
  /api/v0/taxes/{id}:
    get:
      description: |-
        Retrieves detailed information about a specific tax.

        ## Use Cases
        - View tax details
        - Verify tax configuration
        - Check tax status before applying to products

        ## Path Parameters
        - `id`: Tax UUID (required) - Must be a valid UUID format

        ## Example Request
        `GET /api/v0/taxes/123e4567-e89b-12d3-a456-426614174000`

        ## Example Response
        ```json
        {
          "id": "tax_123456",
          "name": "Sales Tax",
          "description": "Standard sales tax for retail transactions",
          "percentage": 8.5,
          "active": true,
          "created_at": "2024-03-20T10:00:00Z",
          "updated_at": "2024-03-20T10:00:00Z"
        }
        ```
      operationId: TaxController_findOne
      parameters:
        - name: id
          required: true
          in: path
          description: Tax unique identifier (UUID)
          schema:
            format: uuid
            example: tax_123e4567-e89b-12d3-a456-426614174000
            type: string
      responses:
        '200':
          description: Successfully retrieved tax
        '400':
          description: Bad Request - Invalid tax ID format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - Tax not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Get a tax by ID
      tags:
        - Taxes
    put:
      description: |-
        Updates an existing tax's information.

        ## Use Cases
        - Modify tax percentage rates
        - Update tax descriptions
        - Activate/deactivate taxes
        - Change tax names

        ## Path Parameters
        - `id`: Tax UUID (required) - Must be a valid UUID format

        ## Example Request
        `PUT /api/v0/taxes/123e4567-e89b-12d3-a456-426614174000`

        ## Example Request Body
        ```json
        {
          "name": "Updated Sales Tax",
          "description": "Updated sales tax rate",
          "percentage": 9.0,
          "active": true
        }
        ```

        ## Notes
        - Only include fields that need to be updated
        - All fields are optional in updates
        - Percentage changes affect future calculations only
      operationId: TaxController_update
      parameters:
        - name: id
          required: true
          in: path
          description: Tax unique identifier (UUID)
          schema:
            format: uuid
            example: tax_123e4567-e89b-12d3-a456-426614174000
            type: string
      requestBody:
        required: true
        description: Tax update data - only include fields you want to update
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTaxDto'
      responses:
        '200':
          description: Successfully updated tax
        '400':
          description: Bad Request - Invalid input data or tax ID format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - Tax not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Update a tax
      tags:
        - Taxes
    delete:
      description: >-
        Deletes an existing tax.


        ## Use Cases

        - Remove obsolete tax rates

        - Clean up unused taxes

        - Comply with regulatory changes


        ## Path Parameters

        - `id`: Tax UUID (required) - Must be a valid UUID format


        ## Example Request

        `DELETE /api/v0/taxes/123e4567-e89b-12d3-a456-426614174000`


        ## Warning

        This action cannot be undone. Consider deactivating the tax instead of deleting it if it has been used in
        transactions.
      operationId: TaxController_remove
      parameters:
        - name: id
          required: true
          in: path
          description: Tax unique identifier (UUID)
          schema:
            format: uuid
            example: tax_123e4567-e89b-12d3-a456-426614174000
            type: string
      responses:
        '200':
          description: Successfully deleted tax
        '400':
          description: Bad Request - Invalid tax ID format
        '401':
          description: Unauthorized - Invalid API credentials
        '404':
          description: Not Found - Tax not found
      security:
        - x-client-secret: []
        - x-client-key: []
      summary: Delete a tax
      tags:
        - Taxes
info:
  title: Devdraft AI Payment & Business Management API
  description: >-

    A comprehensive payment processing and business management API that enables seamless integration of cryptocurrency
    and traditional payment methods.
        
  version: 1.0.0
  contact: {}
tags: []
servers:
  - url: https://api.devdraft.ai
    description: Production Server
components:
  securitySchemes:
    x-client-key:
      type: apiKey
      in: header
      name: x-client-key
      description: Your unique client API key. Obtain this from your Devdraft AI dashboard.
    x-client-secret:
      type: apiKey
      in: header
      name: x-client-secret
      description: Your secret API key. Keep this secure and never expose it in client-side code.
    idempotency-key:
      type: apiKey
      in: header
      name: idempotency-key
      description: Optional UUID v4 for idempotent requests. Prevents duplicate operations when the same key is used.
  schemas:
    UpdatePreferenceInput:
      type: object
      properties: {}
    HealthResponseDto:
      type: object
      properties:
        status:
          type: string
          description: Overall health status of the service. Returns "ok" when healthy, "error" when issues detected.
          example: ok
          enum:
            - ok
            - error
        timestamp:
          type: string
          description: ISO 8601 timestamp when the health check was performed.
          example: '2023-07-01T12:00:00.000Z'
          format: date-time
        version:
          type: string
          description: Current version of the API service. Useful for debugging and compatibility checks.
          example: 1.0.0
        database:
          type: string
          description: Database connectivity status. Shows "connected" when database is accessible, "error" when connection fails.
          example: connected
          enum:
            - connected
            - error
        message:
          type: string
          description: Human-readable message describing the current health status and any issues.
          example: Service is up and running
        authenticated:
          type: boolean
          description: >-
            Indicates whether the request was properly authenticated. Always true for this endpoint since authentication
            is required.
          example: true
      required:
        - status
        - timestamp
        - version
        - database
        - message
        - authenticated
    PublicHealthResponseDto:
      type: object
      properties:
        status:
          type: string
          description: Basic health status of the service. Returns "ok" when the service is responding.
          example: ok
          enum:
            - ok
            - error
        timestamp:
          type: string
          description: ISO 8601 timestamp when the health check was performed.
          example: '2023-07-01T12:00:00.000Z'
          format: date-time
        version:
          type: string
          description: Current version of the API service.
          example: 1.0.0
      required:
        - status
        - timestamp
        - version
    PaymentResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Payment ID
          example: pay_12345abcdef
        amount:
          type: number
          description: The amount charged
          example: 100.5
        currency:
          type: string
          description: The currency code
          example: USD
        status:
          type: string
          description: Payment status
          example: succeeded
        timestamp:
          type: string
          description: Timestamp of the payment
          example: '2023-07-01T12:00:00.000Z'
      required:
        - id
        - amount
        - currency
        - status
        - timestamp
    RefundResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Refund ID
          example: ref_12345abcdef
        paymentId:
          type: string
          description: Original payment ID
          example: pay_12345abcdef
        amount:
          type: number
          description: The amount refunded
          example: 100.5
        status:
          type: string
          description: Refund status
          example: succeeded
        timestamp:
          type: string
          description: Timestamp of the refund
          example: '2023-07-01T12:00:00.000Z'
      required:
        - id
        - paymentId
        - amount
        - status
        - timestamp
    PaymentRequestDto:
      type: object
      properties:
        amount:
          type: number
          description: The amount to charge
          example: 100.5
        currency:
          type: string
          description: The currency code
          example: USD
        description:
          type: string
          description: Description of the payment
          example: Test payment for API
        customerId:
          type: string
          description: Customer reference ID
          example: cus_12345
      required:
        - amount
        - currency
        - description
    CustomerType:
      type: string
      enum:
        - Individual
        - Startup
        - Small Business
        - Medium Business
        - Enterprise
        - Non-Profit
        - Government
      description: Type of customer account. Determines available features and compliance requirements.
    CustomerStatus:
      type: string
      enum:
        - ACTIVE
        - BLACKLISTED
        - DEACTIVATED
        - DELETED
      description: Current status of the customer account. Controls access to services and features.
    CreateCustomerDto:
      type: object
      properties:
        first_name:
          type: string
          description: Customer's first name. Used for personalization and legal documentation.
          example: John
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          description: Customer's last name. Used for personalization and legal documentation.
          example: Doe
          minLength: 1
          maxLength: 100
        email:
          type: string
          description: >-
            Customer's email address. Used for notifications, receipts, and account management. Must be a valid email
            format.
          example: john.doe@example.com
          format: email
        phone_number:
          type: string
          description: >-
            Customer's phone number. Used for SMS notifications and verification. Include country code for international
            numbers.
          example: +1-555-123-4567
          pattern: ^[+]?[1-9]\d{1,14}$
        customer_type:
          description: Type of customer account. Determines available features and compliance requirements.
          example: Individual
          default: Individual
          allOf:
            - $ref: '#/components/schemas/CustomerType'
        status:
          description: Current status of the customer account. Controls access to services and features.
          default: ACTIVE
          example: ACTIVE
          allOf:
            - $ref: '#/components/schemas/CustomerStatus'
      required:
        - first_name
        - last_name
        - phone_number
    UpdateCustomerDto:
      type: object
      properties:
        first_name:
          type: string
          description: Customer's first name. Used for personalization and legal documentation.
          example: John
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          description: Customer's last name. Used for personalization and legal documentation.
          example: Doe
          minLength: 1
          maxLength: 100
        email:
          type: string
          description: >-
            Customer's email address. Used for notifications, receipts, and account management. Must be a valid email
            format.
          example: john.doe@example.com
          format: email
        phone_number:
          type: string
          description: >-
            Customer's phone number. Used for SMS notifications and verification. Include country code for international
            numbers.
          example: +1-555-123-4567
          pattern: ^[+]?[1-9]\d{1,14}$
        customer_type:
          description: Type of customer account. Determines available features and compliance requirements.
          example: Individual
          default: Individual
          allOf:
            - $ref: '#/components/schemas/CustomerType'
        status:
          description: Current status of the customer account. Controls access to services and features.
          default: ACTIVE
          example: ACTIVE
          allOf:
            - $ref: '#/components/schemas/CustomerStatus'
    PaymentLinkProductDto:
      type: object
      properties:
        productId:
          type: string
          description: UUID of the product to include in this payment link. Must be a valid product from your catalog.
          example: 123e4567-e89b-12d3-a456-426614174000
          format: uuid
        quantity:
          type: integer
          description: Quantity of this product to include. Must be at least 1.
          default: 1
          example: 2
          minimum: 1
      required:
        - productId
        - quantity
    CreatePaymentLinkDto:
      type: object
      properties:
        title:
          type: string
          description: Display title for the payment link. This appears on the checkout page and in customer communications.
          minLength: 3
          maxLength: 100
          example: Premium Subscription
        url:
          type: string
          description: >-
            Unique URL slug for the payment link. Can be a full URL or just the path segment. Must be unique within your
            account.
          example: premium-subscription
        description:
          type: string
          description: Detailed description of what the customer is purchasing. Supports markdown formatting.
          maxLength: 500
          example: >-
            Get access to all premium features with our monthly subscription plan. Includes priority support and
            advanced analytics.
        coverImage:
          type: string
          description: Cover image URL
          example: https://example.com/images/premium-subscription.jpg
        linkType:
          type: string
          description: Type of the payment link
          enum:
            - INVOICE
            - PRODUCT
            - COLLECTION
            - DONATION
          example: PRODUCT
        amount:
          type: number
          description: Amount for the payment link
          minimum: 0.01
          example: 29.99
        paymentForId:
          type: string
          description: Payment for ID
          example: sub_123456789
        customerId:
          type: string
          description: Customer ID
          example: 123e4567-e89b-12d3-a456-426614174002
        paymentLinkProducts:
          description: Array of products in the payment link
          example:
            - productId: 123e4567-e89b-12d3-a456-426614174003
              quantity: 1
            - productId: 123e4567-e89b-12d3-a456-426614174004
              quantity: 2
          type: array
          items:
            $ref: '#/components/schemas/PaymentLinkProductDto'
        isForAllProduct:
          type: boolean
          description: Whether the payment link is for all products
          default: false
          example: false
        allowQuantityAdjustment:
          type: boolean
          description: Whether to allow quantity adjustment
          default: true
          example: true
        collectTax:
          type: boolean
          description: Whether to collect tax
          default: false
          example: true
        taxId:
          type: string
          description: Tax ID
          example: 123e4567-e89b-12d3-a456-426614174005
        collectAddress:
          type: boolean
          description: Whether to collect address
          default: false
          example: true
        limitPayments:
          type: boolean
          description: Whether to limit payments
          default: false
          example: true
        maxPayments:
          type: number
          description: Maximum number of payments
          minimum: 1
          example: 100
        customFields:
          type: object
          description: Custom fields
          example:
            customField1: value1
            customField2: value2
        allowMobilePayment:
          type: boolean
          description: Whether to allow mobile payment
          default: false
          example: true
        currency:
          type: string
          description: Currency
          enum:
            - usdc
            - eurc
          default: usdc
          example: usdc
        expiration_date:
          format: date-time
          type: string
          description: Expiration date
          example: '2024-12-31T23:59:59Z'
      required:
        - title
        - url
        - linkType
        - allowQuantityAdjustment
        - collectTax
        - collectAddress
        - allowMobilePayment
        - currency
    UpdatePaymentLinkDto:
      type: object
      properties: {}
    StableCoinCurrency:
      type: string
      enum:
        - usdc
        - eurc
      description: The stablecoin currency to convert FROM. This is the currency the customer will pay with.
    BridgePaymentRail:
      type: string
      enum:
        - ethereum
        - solana
        - polygon
        - avalanche_c_chain
        - base
        - arbitrum
        - optimism
        - stellar
        - tron
        - bridge_wallet
        - wire
        - ach
        - ach_push
        - ach_same_day
        - sepa
        - swift
        - spei
      description: The blockchain network where the source currency resides. Determines gas fees and transaction speed.
    CreateStablePaymentIntentDto:
      type: object
      properties:
        sourceCurrency:
          description: The stablecoin currency to convert FROM. This is the currency the customer will pay with.
          example: usdc
          allOf:
            - $ref: '#/components/schemas/StableCoinCurrency'
        sourceNetwork:
          description: The blockchain network where the source currency resides. Determines gas fees and transaction speed.
          example: ethereum
          allOf:
            - $ref: '#/components/schemas/BridgePaymentRail'
        destinationCurrency:
          description: >-
            The stablecoin currency to convert TO. If omitted, defaults to the same as source currency (cross-chain
            transfer).
          example: eurc
          allOf:
            - $ref: '#/components/schemas/StableCoinCurrency'
        destinationNetwork:
          description: >-
            The blockchain network where the converted currency will be delivered. Must support the destination
            currency.
          example: polygon
          allOf:
            - $ref: '#/components/schemas/BridgePaymentRail'
        destinationAddress:
          type: string
          description: The wallet address where converted funds will be sent. Supports Ethereum (0x...) and Solana address formats.
          example: '0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1'
        amount:
          type: string
          description: >-
            Payment amount in the source currency. Omit for flexible amount payments where users specify the amount
            during checkout.
          example: '100.50'
          pattern: ^\d+(\.\d{1,6})?$
          minimum: 0.01
        customer_first_name:
          type: string
          description: Customer's first name. Used for transaction records and compliance. Required for amounts over $1000.
          example: John
          maxLength: 100
        customer_last_name:
          type: string
          description: Customer's last name. Used for transaction records and compliance. Required for amounts over $1000.
          example: Doe
          maxLength: 100
        customer_email:
          type: string
          description: >-
            Customer's email address. Used for transaction notifications and receipts. Highly recommended for all
            transactions.
          example: john.doe@example.com
          format: email
          maxLength: 255
        customer_address:
          type: string
          description: Customer's full address. Required for compliance in certain jurisdictions and high-value transactions.
          example: 123 Main St, New York, NY 10001
          maxLength: 500
        customer_country:
          type: string
          description: Customer's country of residence. Used for compliance and tax reporting.
          example: United States
          maxLength: 100
        customer_countryISO:
          type: string
          description: Customer's country ISO 3166-1 alpha-2 code. Used for automated compliance checks.
          example: US
          pattern: ^[A-Z]{2}$
          maxLength: 2
        customer_province:
          type: string
          description: Customer's state or province. Required for US and Canadian customers.
          example: New York
          maxLength: 100
        customer_provinceISO:
          type: string
          description: Customer's state or province ISO code. Used for automated tax calculations.
          example: NY
          maxLength: 10
        phoneNumber:
          type: string
          description: Customer's phone number with country code. Used for SMS notifications and verification.
          example: +1-555-123-4567
          pattern: ^[+]?[\d\s\-\(\)]+$
          maxLength: 20
      required:
        - sourceCurrency
        - sourceNetwork
        - destinationNetwork
    FiatCurrency:
      type: string
      enum:
        - usd
        - eur
        - mxn
      description: The fiat currency to convert FROM. Must match the currency of the source payment rail.
    CreateBankPaymentIntentDto:
      type: object
      properties:
        sourcePaymentRail:
          description: The banking payment method to use for the transfer. Determines processing time and fees.
          example: ach_push
          allOf:
            - $ref: '#/components/schemas/BridgePaymentRail'
        sourceCurrency:
          description: The fiat currency to convert FROM. Must match the currency of the source payment rail.
          example: usd
          default: usd
          allOf:
            - $ref: '#/components/schemas/FiatCurrency'
        destinationCurrency:
          description: The stablecoin currency to convert TO. The customer will receive this currency.
          example: usdc
          allOf:
            - $ref: '#/components/schemas/StableCoinCurrency'
        destinationNetwork:
          description: The blockchain network where the stablecoin will be delivered. Must support the destination currency.
          example: ethereum
          allOf:
            - $ref: '#/components/schemas/BridgePaymentRail'
        destinationAddress:
          type: string
          description: Destination wallet address. Supports Ethereum (0x...) and Solana address formats.
          example: '0x742d35Cc6634C0532925a3b8D4C9db96c4b4d8e1'
        amount:
          type: string
          description: Payment amount (optional for flexible amount)
          example: '1000.00'
        customer_first_name:
          type: string
          description: Customer first name
          example: John
        customer_last_name:
          type: string
          description: Customer last name
          example: Doe
        customer_email:
          type: string
          description: Customer email address
          example: john.doe@example.com
        customer_address:
          type: string
          description: Customer address
          example: 123 Main St, New York, NY 10001
        customer_country:
          type: string
          description: Customer country
          example: United States
        customer_countryISO:
          type: string
          description: Customer country ISO code
          example: US
        customer_province:
          type: string
          description: Customer province/state
          example: New York
        customer_provinceISO:
          type: string
          description: Customer province/state ISO code
          example: NY
        phoneNumber:
          type: string
          description: Customer phone number
          example: +1-555-123-4567
        wire_message:
          type: string
          description: Wire transfer message (for WIRE transfers)
          maxLength: 256
          example: 'Payment for invoice #12345'
        sepa_reference:
          type: string
          description: SEPA reference (for SEPA transfers)
          minLength: 6
          maxLength: 140
          example: REF-123456789
        ach_reference:
          type: string
          description: ACH reference (for ACH transfers)
          maxLength: 10
          example: ACH123456
      required:
        - sourcePaymentRail
        - sourceCurrency
        - destinationCurrency
        - destinationNetwork
    CreateWebhookDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the webhook for identification purposes
          example: Payment Notifications
          minLength: 3
          maxLength: 100
        url:
          type: string
          description: URL where webhook events will be sent
          example: https://api.example.com/webhooks/payments
          format: uri
        isActive:
          type: boolean
          description: Whether the webhook is active and will receive events
          example: true
          default: true
        signing_secret:
          type: string
          description: Secret key used to sign webhook payloads for verification
          example: whsec_123456789
        encrypted:
          type: boolean
          description: Whether webhook payloads should be encrypted
          example: false
          default: false
      required:
        - name
        - url
        - isActive
        - encrypted
    WebhookResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the webhook
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Name of the webhook
          example: Payment Notifications
        url:
          type: string
          description: URL where webhook events are sent
          example: https://api.example.com/webhooks/payments
        isActive:
          type: boolean
          description: Whether the webhook is currently active
          example: true
        encrypted:
          type: boolean
          description: Whether webhook payloads are encrypted
          example: false
        created_at:
          type: string
          description: Timestamp when the webhook was created
          example: '2024-03-20T12:00:00.000Z'
        updated_at:
          type: string
          description: Timestamp when the webhook was last updated
          example: '2024-03-20T12:00:00.000Z'
        delivery_stats:
          type: object
          description: Webhook delivery statistics
          example:
            total_events: 150
            successful_deliveries: 145
            failed_deliveries: 5
            last_delivery: '2024-03-20T11:55:00.000Z'
      required:
        - id
        - name
        - url
        - isActive
        - encrypted
        - created_at
        - updated_at
        - delivery_stats
    UpdateWebhookDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the webhook for identification purposes
          example: Payment Notifications
          minLength: 3
          maxLength: 100
        url:
          type: string
          description: URL where webhook events will be sent
          example: https://api.example.com/webhooks/payments
          format: uri
        isActive:
          type: boolean
          description: Whether the webhook is active and will receive events
          example: true
          default: true
        signing_secret:
          type: string
          description: Secret key used to sign webhook payloads for verification
          example: whsec_123456789
        encrypted:
          type: boolean
          description: Whether webhook payloads should be encrypted
          example: false
          default: false
    CreateDirectWalletTransferDto:
      type: object
      properties:
        walletId:
          type: string
          description: The ID of the bridge wallet to transfer from
        network:
          type: string
          description: The network to use for the transfer
        stableCoinCurrency:
          type: string
          description: The stablecoin currency to use
        amount:
          type: number
          description: The amount to transfer
      required:
        - walletId
        - network
        - stableCoinCurrency
        - amount
    CreateDirectBankTransferDto:
      type: object
      properties:
        walletId:
          type: string
          description: The ID of the bridge wallet to transfer from
        paymentRail:
          type: string
          description: The payment rail to use
        destinationCurrency:
          type: string
          description: The destination currency
        sourceCurrency:
          type: string
          description: The source currency
        amount:
          type: number
          description: The amount to transfer
        wire_message:
          type: string
          description: Wire transfer message
        sepa_reference:
          type: string
          description: SEPA transfer reference
        ach_reference:
          type: string
          description: ACH transfer reference
      required:
        - walletId
        - paymentRail
        - destinationCurrency
        - sourceCurrency
        - amount
    CreateStablecoinConversionDto:
      type: object
      properties:
        walletId:
          type: string
          description: The ID of the bridge wallet to use
        sourceNetwork:
          type: string
          description: The source network
        sourceCurrency:
          type: string
          description: The source currency
        destinationCurrency:
          type: string
          description: The destination currency
        amount:
          type: number
          description: The amount to convert
      required:
        - walletId
        - sourceNetwork
        - sourceCurrency
        - destinationCurrency
        - amount
    BridgeFiatPaymentRail:
      type: string
      enum:
        - ach
        - ach_push
        - ach_same_day
        - wire
        - sepa
        - swift
        - spei
      description: The destination payment rail (fiat payment method)
    CreateExternalBankTransferDto:
      type: object
      properties:
        sourceWalletId:
          type: string
          description: The ID of the source bridge wallet
        sourceCurrency:
          type: string
          description: The source currency
        destinationCurrency:
          type: string
          description: The destination currency
        destinationPaymentRail:
          description: The destination payment rail (fiat payment method)
          allOf:
            - $ref: '#/components/schemas/BridgeFiatPaymentRail'
        external_account_id:
          type: string
          description: The external account ID for the bank transfer
        amount:
          type: number
          description: The amount to transfer
        wire_message:
          type: string
          description: Wire transfer message (1-256 characters, only for wire transfers)
          minLength: 1
          maxLength: 256
        sepa_reference:
          type: string
          description: SEPA reference message (6-140 characters, only for SEPA transfers)
          minLength: 6
          maxLength: 140
        swift_reference:
          type: string
          description: SWIFT reference message (1-190 characters, only for SWIFT transfers)
          minLength: 1
          maxLength: 190
        spei_reference:
          type: string
          description: SPEI reference message (1-40 characters, only for SPEI transfers)
          minLength: 1
          maxLength: 40
        swift_charges:
          type: string
          description: SWIFT charges bearer (only for SWIFT transfers)
        ach_reference:
          type: string
          description: ACH reference message (1-10 characters, only for ACH transfers)
          minLength: 1
          maxLength: 10
      required:
        - sourceWalletId
        - sourceCurrency
        - destinationCurrency
        - destinationPaymentRail
        - external_account_id
    CreateExternalStablecoinTransferDto:
      type: object
      properties:
        sourceWalletId:
          type: string
          description: The ID of the source bridge wallet
        sourceCurrency:
          type: string
          description: The source currency
        destinationCurrency:
          type: string
          description: The destination currency
        blockchain_memo:
          type: string
          description: Blockchain memo for the transfer
        beneficiaryId:
          type: string
          description: Beneficiary ID for the stablecoin transfer
          example: beneficiary_12345
        amount:
          type: number
          description: The amount to transfer
      required:
        - sourceWalletId
        - sourceCurrency
        - destinationCurrency
        - beneficiaryId
    DestinationCurrency:
      type: string
      enum:
        - usd
        - eur
        - mxn
        - usdc
        - eurc
        - dai
        - pyusd
        - usdt
      description: Currency for sending funds
    CreateLiquidationAddressDto:
      type: object
      properties:
        chain:
          type: string
          description: The blockchain chain for the liquidation address
          enum:
            - ethereum
            - solana
            - polygon
            - avalanche_c_chain
            - base
            - arbitrum
            - optimism
            - stellar
            - tron
          example: ethereum
        currency:
          type: string
          description: The currency for the liquidation address
          enum:
            - usdc
            - eurc
            - dai
            - pyusd
            - usdt
          example: usdc
        address:
          type: string
          description: The liquidation address on the blockchain
          example: '0x4d0280da2f2fDA5103914bCc5aad114743152A9c'
        external_account_id:
          type: string
          description: External bank account to send funds to
          maxLength: 42
          example: ext_123
        prefunded_account_id:
          type: string
          description: Developer's prefunded account id
          maxLength: 42
          example: pf_acc_123
        bridge_wallet_id:
          type: string
          description: Bridge Wallet to send funds to
          maxLength: 42
          example: bw_123
        destination_payment_rail:
          description: Payment rail for sending funds
          default: ach
          example: sepa
          allOf:
            - $ref: '#/components/schemas/BridgePaymentRail'
        destination_currency:
          description: Currency for sending funds
          default: usd
          example: eur
          allOf:
            - $ref: '#/components/schemas/DestinationCurrency'
        destination_wire_message:
          type: string
          description: Message for wire transfers
          maxLength: 256
          example: Liquidation payment for customer
        destination_sepa_reference:
          type: string
          description: Reference for SEPA transactions
          minLength: 6
          maxLength: 140
          example: SEPA-REF-123456
        destination_ach_reference:
          type: string
          description: Reference for ACH transactions
          maxLength: 10
          example: ACH123
        destination_address:
          type: string
          description: Crypto wallet address for crypto transfers
          example: '0x1234567890abcdef1234567890abcdef12345678'
        destination_blockchain_memo:
          type: string
          description: Memo for blockchain transactions
          example: liquidation-memo-123
        return_address:
          type: string
          description: Address to return funds on failed transactions (Not supported on Stellar)
          example: '0xabcdefabcdefabcdefabcdefabcdefabcdef'
        custom_developer_fee_percent:
          type: string
          description: 'Custom developer fee percentage (Base 100 percentage: 10.2% = "10.2")'
          example: '2.5'
      required:
        - chain
        - currency
        - address
    LiquidationAddressResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the liquidation address
          example: la_generated_id_123
        state:
          type: string
          description: Current state of the liquidation address
          example: active
        customer_id:
          type: string
          description: Customer ID this liquidation address belongs to
          example: cust_123
        chain:
          type: string
          description: Blockchain chain
          example: ethereum
        currency:
          type: string
          description: Currency
          example: usdc
        address:
          type: string
          description: Liquidation address
          example: '0x4d0280da2f2fDA5103914bCc5aad114743152A9c'
        external_account_id:
          type: string
          description: External account ID
        prefunded_account_id:
          type: string
          description: Prefunded account ID
        bridge_wallet_id:
          type: string
          description: Bridge wallet ID
        destination_payment_rail:
          type: string
          description: Destination payment rail
        destination_currency:
          type: string
          description: Destination currency
        custom_developer_fee_percent:
          type: string
          description: Custom developer fee percent
        created_at:
          type: string
          description: Creation timestamp
        updated_at:
          type: string
          description: Last update timestamp
      required:
        - id
        - state
        - customer_id
        - chain
        - currency
        - address
        - created_at
        - updated_at
    AggregatedBalanceResponse:
      type: object
      properties:
        currency:
          type: string
          description: The stablecoin currency
          enum:
            - usdc
            - eurc
          example: usdc
        total_balance:
          type: string
          description: The total aggregated balance across all wallets and chains
          example: '5678.90'
        balances:
          description: Detailed breakdown of balances by wallet and chain
          items:
            type: object
          type: array
      required:
        - currency
        - total_balance
        - balances
    AllBalancesResponse:
      type: object
      properties:
        usdc:
          description: USDC balance aggregation
          allOf:
            - $ref: '#/components/schemas/AggregatedBalanceResponse'
        eurc:
          description: EURC balance aggregation
          allOf:
            - $ref: '#/components/schemas/AggregatedBalanceResponse'
        total_usd_value:
          type: string
          description: Total value in USD equivalent
          example: '6890.45'
      required:
        - usdc
        - eurc
        - total_usd_value
    ExchangeRateResponseDto:
      type: object
      properties:
        from:
          type: string
          example: usd
          description: Source currency code (USD for USDC)
        to:
          type: string
          example: eur
          description: Target currency code (EUR for EURC)
        midmarket_rate:
          type: string
          example: '0.85000'
          description: Mid-market exchange rate from source to target currency
        buy_rate:
          type: string
          example: '0.84500'
          description: Rate for buying target currency (what you get when converting from source to target)
        sell_rate:
          type: string
          example: '0.85500'
          description: Rate for selling target currency (what you pay when converting from target to source)
        timestamp:
          type: string
          example: '2024-01-15T10:30:00Z'
          description: Timestamp when the exchange rate was last updated
      required:
        - from
        - to
        - midmarket_rate
        - buy_rate
        - sell_rate
    CreateProductDto:
      type: object
      properties:
        name:
          type: string
          description: Product name as it will appear to customers. Should be clear and descriptive.
          example: Premium Software License
          minLength: 1
          maxLength: 200
        description:
          type: string
          description: Detailed description of the product. Supports markdown formatting for rich text display.
          example: Annual license for our premium software suite with advanced features, priority support, and regular updates.
          maxLength: 2000
        price:
          type: number
          description: Product price in the specified currency. Must be greater than 0.
          example: 299.99
          minimum: 0.01
        currency:
          type: string
          description: Currency code for the price. Defaults to USD if not specified.
          example: USD
          enum:
            - USD
            - EUR
            - GBP
            - CAD
            - AUD
            - JPY
          default: USD
        type:
          type: string
          description: Product type
          example: DIGITAL
        weight:
          type: number
          description: Weight of the product
        unit:
          type: string
          description: Unit of measurement
        quantity:
          type: number
          description: Quantity available
        stockCount:
          type: number
          description: Stock count
        status:
          type: string
          description: Product status
          example: ACTIVE
        productType:
          type: string
          description: Product type
          example: PRODUCT
        images:
          description: Array of image URLs
          type: array
          items:
            type: string
      required:
        - name
        - description
        - price
    UpdateProductDto:
      type: object
      properties:
        name:
          type: string
          description: Product name as it will appear to customers. Should be clear and descriptive.
          example: Premium Software License
          minLength: 1
          maxLength: 200
        description:
          type: string
          description: Detailed description of the product. Supports markdown formatting for rich text display.
          example: Annual license for our premium software suite with advanced features, priority support, and regular updates.
          maxLength: 2000
        price:
          type: number
          description: Product price in the specified currency. Must be greater than 0.
          example: 299.99
          minimum: 0.01
        currency:
          type: string
          description: Currency code for the price. Defaults to USD if not specified.
          example: USD
          enum:
            - USD
            - EUR
            - GBP
            - CAD
            - AUD
            - JPY
          default: USD
        type:
          type: string
          description: Product type
          example: DIGITAL
        weight:
          type: number
          description: Weight of the product
        unit:
          type: string
          description: Unit of measurement
        quantity:
          type: number
          description: Quantity available
        stockCount:
          type: number
          description: Stock count
        status:
          type: string
          description: Product status
          example: ACTIVE
        productType:
          type: string
          description: Product type
          example: PRODUCT
        images:
          description: Array of image URLs
          type: array
          items:
            type: string
    InvoiceProductDto:
      type: object
      properties:
        product_id:
          type: string
          description: Product ID
        quantity:
          type: number
          description: Quantity of the product
      required:
        - product_id
        - quantity
    CreateInvoiceDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the invoice
        email:
          type: string
          description: Email address
        customer_id:
          type: string
          description: Customer ID
        currency:
          type: string
          description: Currency for the invoice
          enum:
            - usdc
            - eurc
        items:
          type: object
        due_date:
          format: date-time
          type: string
          description: Due date of the invoice
          example: '2025-05-20'
        delivery:
          type: string
          description: Delivery method
          enum:
            - EMAIL
            - MANUALLY
        payment_link:
          type: boolean
          description: Whether to generate a payment link
        payment_methods:
          type: array
          description: Array of accepted payment methods
          items:
            type: string
            enum:
              - ACH
              - BANK_TRANSFER
              - CREDIT_CARD
              - CASH
              - MOBILE_MONEY
              - CRYPTO
        status:
          type: string
          description: Invoice status
          enum:
            - DRAFT
            - OPEN
            - PASTDUE
            - PAID
            - PARTIALLYPAID
        address:
          type: string
          description: Address
        phone_number:
          type: string
          description: Phone number
        send_date:
          format: date-time
          type: string
          description: Send date
          example: '2025-05-20'
        logo:
          type: string
          description: Logo URL
        partial_payment:
          type: boolean
          description: Allow partial payments
        taxId:
          type: string
          description: Tax ID
      required:
        - name
        - email
        - customer_id
        - currency
        - items
        - due_date
        - delivery
        - payment_link
        - payment_methods
        - status
        - partial_payment
    CreateTaxDto:
      type: object
      properties:
        name:
          type: string
          description: Tax name. Used to identify and reference this tax rate.
          example: Sales Tax
          minLength: 1
          maxLength: 100
        description:
          type: string
          description: Optional description explaining what this tax covers.
          example: Standard sales tax for retail transactions
          maxLength: 255
        percentage:
          type: number
          description: Tax percentage rate. Must be between 0 and 100.
          example: 8.5
          minimum: 0
          maximum: 100
        active:
          type: boolean
          description: Whether this tax is currently active and can be applied.
          example: true
          default: true
        appIds:
          type: array
          description: >-
            Array of app IDs where this tax should be available. If not provided, tax will be available for the current
            app.
          example:
            - app_123e4567-e89b-12d3-a456-426614174000
          items:
            type: string
            format: uuid
      required:
        - name
        - percentage
    UpdateTaxDto:
      type: object
      properties:
        name:
          type: string
          description: Tax name for identification and display purposes
          example: Updated Sales Tax
          maxLength: 100
        description:
          type: string
          description: Detailed description of what this tax covers
          example: Updated description for retail sales tax
          maxLength: 255
        percentage:
          type: number
          description: Tax rate as a percentage (0-100)
          example: 9.5
          minimum: 0
          maximum: 100
        active:
          type: boolean
          description: Whether this tax is currently active and can be applied
          example: false
        appIds:
          type: array
          description: Array of app IDs where this tax should be available
          example:
            - app_123e4567-e89b-12d3-a456-426614174000
          items:
            type: string
            format: uuid
